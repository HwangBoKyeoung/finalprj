<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.third.prj.confirmrequest.mapper.ConfirmMapper">
	<resultMap type="com.third.prj.confirmrequest.service.ConfirmVO" id="confMap">
		<id column="MV_NO" property="mvNo"/>
		<result column="P_NO" property="pNo"/>
		<result column="G_NO" property="gNo"/>
		<result column="GENRE" property="genre"/>
		<result column="RATING" property="rating"/>
		<result column="DIRECTOR" property="director"/>
		<result column="COUNTRY" property="country"/>
		<result column="LOC" property="loc"/>
		<result column="ADDR" property="addr"/>
		<result column="SELLER" property="seller"/>
		<result column="GOODS_CD" property="goodsCd"/>
		<result column="C_ID" property="CId"/>
		<result column="CONFIRM" property="confirm"/>
		<result column="REFUSE_RS" property="refuseRs"/>
		<result column="NAME" property="name"/>
		<result column="FILE_CD" property="fileCd"/>
		<result column="CONTENT" property="content"/>
		<result column="PRICE" property="price"/>
		<result column="ACTOR" property="actor"/>
	</resultMap>
	
	<select id="movieConfirmList" resultMap="confMap">
		SELECT *
		FROM MOVIE
		ORDER BY MV_NO
	</select>
	<select id="movieConfirmSelect" resultMap="confMap">
		SELECT MV_NO,
				NAME,
				GENRE,
				DIRECTOR,
				RATING,
				DISTRIBUTOR,
				COUNTRY,
				CONTENT,
				ACTOR,
				FILE_CD,
				CONFIRM,
				REFUSE_RS
			FROM MOVIE
			WHERE MV_NO = #{MvNo}
	</select>
	
	<select id="perforConfirmList" resultMap="confMap">
		SELECT *
		FROM PERFORMANCE
		ORDER BY P_NO
	</select>
	<select id="perforConfirmSelect" resultMap="confMap">
		SELECT P_NO,
				NAME,
				CONTENT,
				C_ID,
				ACTOR,
				FILE_CD,
				LOC,
				ADDR,
				PRICE,
				CONFIRM,
				REFUSE_RS
		FROM PERFORMANCE
		WHERE p_no = #{PNo}
	</select>
	
	<select id="goodsConfirmList" resultMap="confMap">
		SELECT *
		FROM GOODS
		ORDER BY G_NO
	</select>
	<select id="goodsConfirmSelect" resultMap="confMap">
		SELECT G_NO,
				NAME, 
				SELLER, 
				PRICE, 
				CONTENT, 
				GOODS_CD, 
				FILE_CD, 
				FILE_RE, 
				CONFIRM, 
				REFUSE_RS
		FROM GOODS
		WHERE G_NO = #{GNo}
	</select>
	
	<update id="movieConfirmUpdate" parameterType="com.third.prj.confirmrequest.service.ConfirmVO">
		UPDATE MOVIE
		<set>
			<if test="confirm != null"> CONFIRM = #{confirm},</if>
			<if test="refuseRs != null"> REFUSE_RS = #{refuseRs},</if>
		</set>
		WHERE MV_NO = #{MvNo}
	</update>
	
	<update id="perforConfirmUpdate" parameterType="com.third.prj.confirmrequest.service.ConfirmVO">
		UPDATE PERFORMANCE
		<set>
			<if test="confirm != null"> CONFIRM = #{confirm},</if>
			<if test="refuseRs != null"> REFUSE_RS = #{refuseRs},</if>
		</set>
		WHERE P_NO = #{PNo}
	</update>
	
	<update id="goodsConfirmUpdate" parameterType="com.third.prj.confirmrequest.service.ConfirmVO">
		UPDATE GOODS
		<set>
			<if test="confirm != null"> CONFIRM = #{confirm},</if>
			<if test="refuseRs != null"> REFUSE_RS = #{refuseRs},</if>
		</set>
		WHERE G_NO = #{GNo}
	</update>
	
	<select id="CompanyConfirmList" resultMap="confMap">
		SELECT M.NAME, 
				P.NAME, 
				G.NAME, 
				G.G_NO, 
				P.P_NO, 
				M.MV_NO, 
				M.CONFIRM, 
				P.CONFIRM, 
				G.CONFIRM 
		FROM MOVIE M, PERFORMANCE P, GOODS G
        ORDER BY M.MV_NO, P.P_NO , G.G_NO
	</select>
	
	<select id="moviceCompanyConfirmSelect">
		SELECT NAME, 
				MV_NO,
				C_ID, 
				CONFIRM, 
				REFUSE_RS
		FROM MOVIE 
		WHERE MV_NO = #{MvNo}
	</select>
	<select id="perforCompanyConfirmSelect">
		SELECT NAME, 
				P_NO,
				C_ID,
				CONFIRM, 
				REFUSE_RS
		FROM PERFORMANCE 
		WHERE P_NO = #{PNo}
	</select>
	<select id="goodsCompanyConfirmSelect">
		SELECT NAME, 
				G_NO,
				C_ID,
				CONFIRM, 
				REFUSE_RS
		FROM GOODS 
		WHERE G_NO = #{GNo}
	</select>
</mapper>