<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.third.prj.user.mapper.UserMapper">
	<insert id="userInsert" parameterType="com.third.prj.user.service.UserVO">
		INSERT INTO users(name, u_id, pwd, email, addr, phone, birthdt)
		VALUES (#{name}, #{Uid}, #{pwd}, #{email}, #{addr}, #{phone}, #{birthDt})
	</insert>
	
	<select id="idChk" resultType="int">
		SELECT COUNT(*)
		FROM   users
		WHERE  u_id = #{Uid}
	</select>
	
	<select id="userSelect" resultType="com.third.prj.user.service.UserVO">
		SELECT *
		FROM   users
		WHERE  u_id=#{Uid}
		<if test="pwd!=null">
			AND pwd=#{pwd}
		</if>
	</select>
	
	<select id="userList" resultType="com.third.prj.user.service.UserVO">
		SELECT   *
		FROM     users
		ORDER BY u_id DESC
	</select>
	
	<select id="userSearch" resultType="com.third.prj.user.service.UserVO" parameterType="String">
		SELECT *
		FROM   users
		WHERE
		<if test="key == '전체'">u_id LIKE '%'||#{val}||'%' OR name LIKE '%'||#{val}||'%' OR email LIKE '%'||#{val}||'%'</if>
		<if test="key == '아이디'">u_id LIKE '%'||#{val}||'%'</if>
		<if test="key == '이름'">name LIKE '%'||#{val}||'%'</if>
		<if test="key == '이메일'">email LIKE '%'||#{val}||'%'</if>
		ORDER BY u_id DESC
	</select>
	
		<select id="getUser" parameterType="com.third.prj.user.service.UserVO" resultType="com.third.prj.user.service.UserVO">
	      SELECT u_id, {noop}pwd, role
	      FROM users
	      WHERE u_id=#{Uid}
	   </select>
	
</mapper>